let m="undefined"!==typeof BigUint64Array,p=Symbol();function r(a,b){var d=new Uint32Array(a);a=new Uint16Array(a);d=d[b+-4>>>2]>>>1;b>>>=1;if(1024>=d)return String.fromCharCode.apply(String,a.subarray(b,b+d));let c=[];do{var h=a[b+1024-1];h=55296<=h&&56320>h?1023:1024;c.push(String.fromCharCode.apply(String,a.subarray(b,b+=h)));d-=h}while(1024<d);return c.join("")+String.fromCharCode.apply(String,a.subarray(b,b+d))}
function t(a){function b(a,b){return a?r(a.buffer,b):"<yet unknown>"}let d={},c=a.env=a.env||{};c.abort=c.abort||function(a,f,g,e){let k=d.memory||c.memory;throw Error("abort: "+b(k,a)+" at "+b(k,f)+":"+g+":"+e);};c.trace=c.trace||function(a,f){console.log("trace: "+b(d.memory||c.memory,a)+(f?" ":"")+Array.prototype.slice.call(arguments,2,2+f).join(", "))};a.Math=a.Math||Math;a.Date=a.Date||Date;return d}
function u(a,b){function d(a){let b=new Uint32Array(k.buffer),c=b[q>>>2];if((a>>>=0)>=c)throw Error("invalid id: "+a);return b[(q+4>>>2)+2*a]}function c(a){let b=new Uint32Array(k.buffer),c=b[q>>>2];if((a>>>=0)>=c)throw Error("invalid id: "+a);return b[(q+4>>>2)+2*a+1]}function h(a,b,c){let d=k.buffer;if(c)switch(a){case 2:return new Float32Array(d);case 3:return new Float64Array(d)}else switch(a){case 0:return new (b?Int8Array:Uint8Array)(d);case 1:return new (b?Int16Array:Uint16Array)(d);case 2:return new (b?
Int32Array:Uint32Array)(d);case 3:return new (b?BigInt64Array:BigUint64Array)(d)}throw Error("unsupported align: "+a);}function f(a){let b=new Uint32Array(k.buffer);var c=b[a+-8>>>2];let e=d(c);if(!(e&1))throw Error("not an array: "+c);c=31-Math.clz32(e>>>5&31);var n=b[a+4>>>2];a=e&2?b[a+12>>>2]:b[n+-4>>>2]>>>c;return h(c,e&1024,e&2048).subarray(n>>>=c,n+a)}function g(a,b,c){return new a(e(a,b,c))}function e(a,b,c){let d=k.buffer,e=new Uint32Array(d);c=e[c+4>>>2];return new a(d,c,e[c+-4>>>2]>>>b)}
b=b.exports;let k=b.memory,l=b.table,v=b.__alloc,x=b.__retain,q=b.__rtti_base||-1;a.__allocString=function(a){let b=a.length,c=v(b<<1,1),d=new Uint16Array(k.buffer);for(var e=0,f=c>>>1;e<b;++e)d[f+e]=a.charCodeAt(e);return c};a.__getString=function(a){let b=k.buffer;if(1!==(new Uint32Array(b))[a+-8>>>2])throw Error("not a string: "+a);return r(b,a)};a.__allocArray=function(a,b){var c=d(a);if(!(c&3))throw Error("not an array: "+a+" @ "+c);let e=31-Math.clz32(c>>>5&31),f=b.length,g=v(f<<e,0);a=v(c&
2?16:12,a);var n=new Uint32Array(k.buffer);n[a+0>>>2]=x(g);n[a+4>>>2]=g;n[a+8>>>2]=f<<e;c&2&&(n[a+12>>>2]=f);n=h(e,c&1024,c&2048);if(c&8192)for(c=0;c<f;++c)n[(g>>>e)+c]=x(b[c]);else n.set(b,g>>>e);return a};a.__getArrayView=f;a.__getArray=function(a){a=f(a);let b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c};a.__getArrayBuffer=function(a){let b=k.buffer,c=(new Uint32Array(b))[a+-4>>>2];return b.slice(a,a+c)};a.__getInt8Array=g.bind(null,Int8Array,0);a.__getInt8ArrayView=e.bind(null,
Int8Array,0);a.__getUint8Array=g.bind(null,Uint8Array,0);a.__getUint8ArrayView=e.bind(null,Uint8Array,0);a.__getUint8ClampedArray=g.bind(null,Uint8ClampedArray,0);a.__getUint8ClampedArrayView=e.bind(null,Uint8ClampedArray,0);a.__getInt16Array=g.bind(null,Int16Array,1);a.__getInt16ArrayView=e.bind(null,Int16Array,1);a.__getUint16Array=g.bind(null,Uint16Array,1);a.__getUint16ArrayView=e.bind(null,Uint16Array,1);a.__getInt32Array=g.bind(null,Int32Array,2);a.__getInt32ArrayView=e.bind(null,Int32Array,
2);a.__getUint32Array=g.bind(null,Uint32Array,2);a.__getUint32ArrayView=e.bind(null,Uint32Array,2);m&&(a.__getInt64Array=g.bind(null,BigInt64Array,3),a.__getInt64ArrayView=e.bind(null,BigInt64Array,3),a.__getUint64Array=g.bind(null,BigUint64Array,3),a.__getUint64ArrayView=e.bind(null,BigUint64Array,3));a.__getFloat32Array=g.bind(null,Float32Array,2);a.__getFloat32ArrayView=e.bind(null,Float32Array,2);a.__getFloat64Array=g.bind(null,Float64Array,3);a.__getFloat64ArrayView=e.bind(null,Float64Array,
3);a.__instanceof=function(a,b){let d=new Uint32Array(k.buffer);a=d[a+-8>>>2];if(a<=d[q>>>2]){do if(a==b)return!0;while(a=c(a))}return!1};a.memory=a.memory||k;a.table=a.table||l;return w(b,a)}function y(a){return"undefined"!==typeof Response&&a instanceof Response}async function z(a,b){return y(a=await a)?A(a,b):u(t(b||(b={})),await WebAssembly.instantiate(a instanceof WebAssembly.Module?a:await WebAssembly.compile(a),b))}
async function A(a,b){return WebAssembly.instantiateStreaming?u(t(b||(b={})),(await WebAssembly.instantiateStreaming(a,b)).instance):z(y(a=await a)?a.arrayBuffer():a,b)}var B=A;
function w(a,b){b=b?Object.create(b):{};var d=a.__argumentsLength?function(b){a.__argumentsLength.value=b}:a.__setArgumentsLength||a.__setargc||function(){};for(let f in a){if(!Object.prototype.hasOwnProperty.call(a,f))continue;let g=a[f];var c=f.split(".");let e=b;for(;1<c.length;){var h=c.shift();Object.prototype.hasOwnProperty.call(e,h)||(e[h]={});e=e[h]}c=c[0];h=c.indexOf("#");if(0<=h){let b=c.substring(0,h),l=e[b];if("undefined"===typeof l||!l.prototype){let a=function(...b){return a.wrap(a.prototype.constructor(0,
...b))};a.prototype={valueOf:function(){return this[p]}};a.wrap=function(b){return Object.create(a.prototype,{[p]:{value:b,writable:!1}})};l&&Object.getOwnPropertyNames(l).forEach(b=>Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(l,b)));e[b]=a}c=c.substring(h+1);e=e[b].prototype;if(/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(e,c=c.substring(4))){let b=a[f.replace("set:","get:")],d=a[f.replace("get:","set:")];Object.defineProperty(e,c,{get:function(){return b(this[p])},
set:function(a){d(this[p],a)},enumerable:!0})}}else"constructor"===c?(e[c]=(...a)=>{d(a.length);return g(...a)}).original=g:(e[c]=function(...a){d(a.length);return g(this[p],...a)}).original=g}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(e,c=c.substring(4))||Object.defineProperty(e,c,{get:a[f.replace("set:","get:")],set:a[f.replace("get:","set:")],enumerable:!0}):"function"===typeof g&&g!==d?(e[c]=(...a)=>{d(a.length);return g(...a)}).original=g:e[c]=g}return b}
async function C(a,b){let d=a instanceof Promise;d&&(a=await a);return d?await B(a,b):await z(a,b)}let D=["__alloc","__allocString","__retain","__release"];
function E(a,b){if("object"!==typeof a)throw Error("Did not pass a valid exports object of the WebAssembly Instance");if("function"!==typeof b)throw Error("Did not pass a valid exported function of the WebAssembly Instance");D.forEach(b=>{if(!a[b])throw Error('Required Exported AssemblyScript Runtime functions are not present. Runtime must be set to "full" or "stub"');})}
let F={STRING:{isTypeFromArgument:a=>"string"===typeof a,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_String_ID),getRef:(a,b)=>a.__retain(a.__allocString(b)),getValueFromRef:(a,b)=>a.__getString(b)},INT8ARRAY:{isTypeFromArgument:a=>a instanceof Int8Array,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Int8Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Int8Array_ID,b)),getValueFromRef:(a,b)=>a.__getInt8Array(b).slice()},UINT8ARRAY:{isTypeFromArgument:a=>a instanceof Uint8Array,
isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Uint8Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Uint8Array_ID,b)),getValueFromRef:(a,b)=>a.__getUint8Array(b).slice()},INT16ARRAY:{isTypeFromArgument:a=>a instanceof Int16Array,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Int16Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Int16Array_ID,b)),getValueFromRef:(a,b)=>a.__getInt16Array(b).slice()},UINT16ARRAY:{isTypeFromArgument:a=>a instanceof Uint16Array,
isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Uint16Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Uint16Array_ID,b)),getValueFromRef:(a,b)=>a.__getUint16Array(b).slice()},INT32ARRAY:{isTypeFromArgument:a=>a instanceof Int32Array,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Int32Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Int32Array_ID,b)),getValueFromRef:(a,b)=>a.__getInt32Array(b).slice()},UINT32ARRAY:{isTypeFromArgument:a=>a instanceof Uint32Array,
isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Uint32Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Uint32Array_ID,b)),getValueFromRef:(a,b)=>a.__getUint32Array(b).slice()},FLOAT32ARRAY:{isTypeFromArgument:a=>a instanceof Float32Array,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Float32Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Float32Array_ID,b)),getValueFromRef:(a,b)=>a.__getFloat32Array(b).slice()},FLOAT64ARRAY:{isTypeFromArgument:a=>a instanceof
Float64Array,isTypeFromReference:(a,b)=>a.__instanceof(b,a.__asbind_Float64Array_ID),getRef:(a,b)=>a.__retain(a.__allocArray(a.__asbind_Float64Array_ID,b)),getValueFromRef:(a,b)=>a.__getFloat64Array(b).slice()}};
function G(a,b,d){function c(){const c=a.unboundExports;g===b&&(g=h(b,[...d]));const k=[];Array.prototype.slice.call(arguments).forEach((a,b)=>{let d=void 0;g.shouldCacheTypes&&g.cachedArgTypes[b]&&"ref"===g.cachedArgTypes[b].type?d=F[g.cachedArgTypes[b].key]:Object.keys(F).some(e=>F[e].isTypeFromReference(c,a)?(d=F[e],g.shouldCacheTypes&&(g.cachedArgTypes[b]={type:"ref",key:e}),!0):!1);d?k.push(d.getValueFromRef(c,a)):k.push(a)});return f.apply(null,k)}let h=(a,b)=>{a=a[b[0]];b.shift();return 0<
b.length?h(a,b):a},f=h(b,[...d]),g=b;c.shouldCacheTypes=!0;c.cachedArgTypes=[];return c}
function H(a,b){function d(){var d=Array.prototype.slice.call(arguments);f===a.exports&&(f=a.exports[b]);const e=[],k=[];d.forEach((a,b)=>{if("number"===typeof a)e.push(a),f.shouldCacheTypes&&(f.cachedArgTypes[b]={type:"number"});else{var d=void 0;if(f.shouldCacheTypes&&f.cachedArgTypes[b]&&"ref"===f.cachedArgTypes[b].type)d=F[f.cachedArgTypes[b].key];else if(Object.keys(F).some(c=>F[c].isTypeFromArgument(a)?(d=F[c],f.shouldCacheTypes&&(f.cachedArgTypes[b]={type:"ref",key:c}),!0):!1),!d)throw Error(`The argument, ${a}, is not a supported type by asbind`);
e.push(d.getRef(c,a));k.push(b)}});const l=h.apply(null,e);k.forEach(a=>{c.__release(e[a])});d=void 0;if(void 0!==l){let a=void 0;f.shouldCacheTypes&&f.cachedReturnTypes[0]?"ref"===f.cachedReturnTypes[0].type&&(a=a=F[f.cachedReturnTypes[0].key]):Object.keys(F).some(b=>F[b].isTypeFromReference(c,l)?(a=F[b],f.shouldCacheTypes&&(f.cachedReturnTypes[0]={type:"ref",key:b}),!0):!1);a?d=a.getValueFromRef(c,l):"number"===typeof l&&(d=l,f.shouldCacheTypes&&(f.cachedReturnTypes[0]={type:"number"}))}return d}
let c=a.unboundExports,h=c[b];E(c,h);let f=a.exports;d.shouldCacheTypes=!0;d.cachedArgTypes=[];d.cachedReturnTypes=[];return d}let I=(a,b,d)=>{a&&Object.keys(a).forEach(c=>{"function"===typeof a[c]?d(a,b,c):"object"===typeof a[c]&&I(a[c],[...b,c],d)})};
class J{constructor(){this.unboundExports={};this.exports={};this.importObject={}}async _instantiate(a,b){this._instantiateBindImportFunctions(b);a=await C(a,this.importObject);this._instantiateBindUnboundExports(a)}_instantiateSync(a,b){this._instantiateBindImportFunctions(b);b=this.importObject;a=u(t(b||(b={})),new WebAssembly.Instance(a instanceof WebAssembly.Module?a:new WebAssembly.Module(a),b));this._instantiateBindUnboundExports(a)}_instantiateBindImportFunctions(a){this.importObject=a;I(this.importObject,
[],(a,d,c)=>{a[`__asbind_unbound_${c}`]=a[c];a[c]=G(this,this.importObject,[...d,c])})}_instantiateBindUnboundExports(a){this.unboundExports=a;this.exports={};Object.keys(this.unboundExports).forEach(a=>{var b;if(b="function"===typeof this.unboundExports[a])b=a.startsWith("__asbind")?!0:D.includes(a)?!0:!1,b=!b;this.exports[a]=b?H(this,a):this.unboundExports[a]})}enableExportFunctionTypeCaching(){Object.keys(this.exports).forEach(a=>{this.exports[a].shouldCacheTypes=!0})}disableExportFunctionTypeCaching(){Object.keys(this.exports).forEach(a=>
{this.exports[a].shouldCacheTypes=!1})}enableImportFunctionTypeCaching(){I(this.importObject,[],(a,b,d)=>{a[d].shouldCacheTypes=!0})}disableImportFunctionTypeCaching(){I(this.importObject,[],(a,b,d)=>{a[d].shouldCacheTypes=!1})}}let K={version:"0.2.0",instantiate:async(a,b)=>{let d=new J;await d._instantiate(a,b);return d},instantiateSync:(a,b)=>{let d=new J;d._instantiateSync(a,b);return d}};export default K;var AsBind=K;export{AsBind};
